(function(){"use strict";var e={309:function(e,t,n){n(6992),n(8674),n(9601),n(7727);var r=n(8935),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],u=n(3736),a={},c=(0,u.Z)(a,o,i,!1,null,null,null),s=c.exports,l=(n(2222),n(1539),n(6755),n(2809)),f=n(4665);n(8862);function d(){var e;try{return e=JSON.parse(localStorage.getItem("user"))||null,e}catch(t){return e={},e}}function g(){return{user:d()}}var p={namespaced:!0,state:g,getters:{loading:function(e){return e.loading},user:function(e){return e.user}},mutations:{setUser:function(e,t){e.user=t},resetState:function(e){Object.assign(e,g())}},actions:{storeUser:function(e,t){var n=e.commit;n("setUser",t),localStorage.setItem("user",JSON.stringify(t))}}},h=n(6198),m=(n(8975),n(1703),n(6133)),v=n(2751),b=n(1399),w="users/login",A="users",k=function(){function e(){(0,m.Z)(this,e)}return(0,v.Z)(e,null,[{key:"login",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b.O.post(w,e).then((function(e){return e.data}))}},{key:"signup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b.O.post(A,e).then((function(e){return e.data}))}}]),e}(),y={namespaced:!0,state:function(){return{loading:!1}},getters:{loading:function(e){return e.loading}},mutations:{setLoading:function(e,t){e.loading=t}},actions:{login:function(e,t){return(0,h.Z)(regeneratorRuntime.mark((function n(){var r,o,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=e.dispatch,r("setLoading",!0),n.prev=2,n.next=5,k.login(t);case 5:i=n.sent,u=i.user,o("User/storeUser",u,{root:!0}),r("Auth/setAccessToken",u.token,{root:!0}),n.next=14;break;case 11:throw n.prev=11,n.t0=n["catch"](2),n.t0;case 14:return n.prev=14,r("setLoading",!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})))()}}},L={namespaced:!0,state:function(){return{loading:!1}},getters:{loading:function(e){return e.loading}},mutations:{setLoading:function(e,t){e.loading=t}},actions:{signup:function(e,t){return(0,h.Z)(regeneratorRuntime.mark((function n(){var r,o,i,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=e.dispatch,r("setLoading",!0),n.prev=2,n.next=5,k.signup(t);case 5:i=n.sent,u=i.user,o("User/storeUser",u,{root:!0}),r("Auth/setAccessToken",u.token,{root:!0}),n.next=14;break;case 11:throw n.prev=11,n.t0=n["catch"](2),n.t0;case 14:return n.prev=14,r("setLoading",!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})))()}}},x=n(1863);function S(){return{loading:!1,accessToken:x.Z.getAccessToken()}}var Z={namespaced:!0,modules:{Login:y,Signup:L},state:S,getters:{loading:function(e){return e.loading},isLoggedIn:function(e){return e.accessToken}},mutations:{setLoading:function(e,t){e.loading=t},setAccessToken:function(e,t){e.accessToken=t,x.Z.setAccessToken(t),b.b.defaults.headers.Authorization="Bearer "+x.Z.getAccessToken()},resetState:function(e){Object.assign(e,S())}},actions:{getAccessToken:function(){var e=x.Z.getAccessToken();return e&&""!==e?Promise.resolve(e):Promise.reject(new Error("No access token"))},isLoggedIn:function(e){return(0,h.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.prev=1,t.next=4,n("getAccessToken");case 4:return t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t["catch"](1),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}},O="articles/feed",C="articles",P=function(e){return"articles/".concat(e)},T=function(){function e(){(0,m.Z)(this,e)}return(0,v.Z)(e,null,[{key:"getArticlesFeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b.b.get(O,{params:e}).then((function(e){return e.data}))}},{key:"getAllArticles",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b.O.get(C,{params:e}).then((function(e){return e.data}))}},{key:"createArticle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return b.b.post(C,e).then((function(e){return e.data}))}},{key:"getArticleBySlug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.O.get(P(e),t).then((function(e){return e.data}))}}]),e}(),E={namespaced:!0,state:function(){return{loading:!1}},getters:{loading:function(e){return e.loading}},mutations:{setLoading:function(e,t){e.loading=t}},actions:{}},_={namespaced:!0,state:function(){return{loading:!1,articles:[],articlesCount:0}},getters:{loading:function(e){return e.loading},articles:function(e){return e.articles},articlesCount:function(e){return e.articlesCount}},mutations:{setLoading:function(e,t){e.loading=t},setArticles:function(e,t){e.articles=t},setArticlesCount:function(e,t){e.articlesCount=t}},actions:{getArticlesFeed:function(e){var t=arguments;return(0,h.Z)(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=t.length>1&&void 0!==t[1]?t[1]:{},r("setLoading",!0),n.prev=3,n.next=6,T.getArticlesFeed(o);case 6:return i=n.sent,r("setArticles",i.articles),r("setArticlesCount",i.articlesCount),n.abrupt("return",i);case 12:throw n.prev=12,n.t0=n["catch"](3),n.t0;case 15:return n.prev=15,r("setLoading",!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[3,12,15,18]])})))()}}},R={namespaced:!0,state:function(){return{loading:!1,articles:[]}},getters:{loading:function(e){return e.loading},articles:function(e){return e.articles}},mutations:{setLoading:function(e,t){e.loading=t},setArticles:function(e,t){e.articles=t}},actions:{createArticle:function(e,t){return(0,h.Z)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("setLoading",!0),n.prev=2,n.next=5,T.createArticle(t);case 5:return o=n.sent,n.abrupt("return",o);case 9:throw n.prev=9,n.t0=n["catch"](2),n.t0;case 12:return n.prev=12,r("setLoading",!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[2,9,12,15]])})))()}}},j={namespaced:!0,state:function(){return{loading:!1,article:[]}},getters:{loading:function(e){return e.loading},article:function(e){return e.article}},mutations:{setLoading:function(e,t){e.loading=t},setArticle:function(e,t){e.article=t}},actions:{getArticleBySlug:function(e,t){return(0,h.Z)(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("setLoading",!0),n.prev=2,n.next=5,T.getArticleBySlug(t);case 5:return o=n.sent,i=o.article,r("setArticle",i),n.abrupt("return",i);case 11:throw n.prev=11,n.t0=n["catch"](2),n.t0;case 14:return n.prev=14,r("setLoading",!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})))()}}};function U(){return{loading:!1,articles:[],articlesCount:0}}var B={namespaced:!0,modules:{Home:E,Feed:_,CreateArticle:R,ViewArticle:j},state:U,getters:{loading:function(e){return e.loading},articles:function(e){return e.articles},articlesCount:function(e){return e.articlesCount}},mutations:{setLoading:function(e,t){e.loading=t},setArticles:function(e,t){e.articles=t},setArticlesCount:function(e,t){e.articlesCount=t},resetState:function(e){Object.assign(e,U())}},actions:{getArticles:function(e){var t=arguments;return(0,h.Z)(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=t.length>1&&void 0!==t[1]?t[1]:{},r("setLoading",!0),n.prev=3,n.next=6,T.getAllArticles(o);case 6:return i=n.sent,r("setArticles",i.articles),r("setArticlesCount",i.articlesCount),n.abrupt("return",i);case 12:throw n.prev=12,n.t0=n["catch"](3),n.t0;case 15:return n.prev=15,r("setLoading",!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[3,12,15,18]])})))()},resetState:function(e){var t=e.commit;t("resetState")}}},N=function(e){return"profiles/".concat(e)},F=function(e){return"profiles/".concat(e,"/follow")},I=function(){function e(){(0,m.Z)(this,e)}return(0,v.Z)(e,null,[{key:"getProfileByUsername",value:function(e){return b.O.get(N(e)).then((function(e){return e.data}))}},{key:"followProfile",value:function(e){return b.b.post(F(e)).then((function(e){return e.data}))}},{key:"unfollowProfile",value:function(e){return b.b["delete"](F(e)).then((function(e){return e.data}))}}]),e}(),V={namespaced:!0,state:function(){return{loading:!1,profile:[]}},getters:{loading:function(e){return e.loading},profile:function(e){return e.profile}},mutations:{setLoading:function(e,t){e.loading=t},setProfile:function(e,t){e.profile=t}},actions:{getProfileByUsername:function(e,t){return(0,h.Z)(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,r("setLoading",!0),n.prev=2,n.next=5,I.getProfileByUsername(t);case 5:return o=n.sent,i=o.profile,r("setProfile",i),n.abrupt("return",i);case 11:throw n.prev=11,n.t0=n["catch"](2),n.t0;case 14:return n.prev=14,r("setLoading",!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[2,11,14,17]])})))()}}};function M(){return{loading:!1}}var $={namespaced:!0,modules:{ViewProfile:V},state:M,getters:{loading:function(e){return e.loading}},mutations:{setLoading:function(e,t){e.loading=t},resetState:function(e){Object.assign(e,M())}},actions:{followUnfollowProfile:function(e,t){return(0,h.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,r("setLoading",!0),n.prev=2,!t.following){n.next=8;break}return n.next=6,I.unfollowProfile(t.username);case 6:n.next=10;break;case 8:return n.next=10,I.followProfile(t.username);case 10:n.next=15;break;case 12:throw n.prev=12,n.t0=n["catch"](2),n.t0;case 15:case"end":return n.stop()}}),n,null,[[2,12]])})))()},resetState:function(e){var t=e.commit;t("resetState")}}};r["default"].use(f.ZP);var D=new f.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{User:p,Auth:Z,Articles:B,Profiles:$}}),z=(n(8783),n(3948),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex justify-center items-center h-full"},[n("router-view")],1)}),q=[],H={},J=H,W=(0,u.Z)(J,z,q,!1,null,null,null),K=W.exports,G={path:"/",component:K,redirect:"login",children:[{path:"login",component:function(){return n.e(33).then(n.bind(n,3033))}},{path:"signup",component:function(){return n.e(349).then(n.bind(n,5349))}},{path:"home",component:function(){return n.e(745).then(n.bind(n,1745))}}]},Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},X=[],Y={},ee=Y,te=(0,u.Z)(ee,Q,X,!1,null,null,null),ne=te.exports,re={path:"/",component:ne,redirect:"feed",children:[{path:"feed",component:function(){return n.e(490).then(n.bind(n,7490))}},{path:"articles/create",component:function(){return n.e(156).then(n.bind(n,6156))}},{path:"articles/:slug",component:function(){return n.e(456).then(n.bind(n,4456))}}]},oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},ie=[],ue={},ae=ue,ce=(0,u.Z)(ae,oe,ie,!1,null,null,null),se=ce.exports,le={path:"/",component:se,children:[{path:"profiles/:username",component:function(){return n.e(565).then(n.bind(n,5565))}}]},fe=[{path:"/",component:function(){return n.e(585).then(n.bind(n,8166))},children:[re,le]},{path:"/",component:function(){return n.e(756).then(n.bind(n,5608))},children:[G]},{path:"*",component:function(){return n.e(100).then(n.bind(n,1100))}}],de=fe;r["default"].use(l.Z);var ge=new l.Z({routes:de}),pe=["/login","/signup","/home"],he=[].concat(pe,["/articles"]);ge.beforeEach((function(e,t,n){D.dispatch("Auth/getAccessToken").then((function(){pe.some((function(t){return e.path.startsWith(t)}))?n("/feed"):n()})).catch((function(){he.some((function(t){return e.path.startsWith(t)}))?n():(x.Z.reset(),n("/home"))}))}));var me=ge,ve=n(4549),be=n.n(ve),we=n(187);r["default"].use(be(),{locale:we.Z}),r["default"].config.productionTip=!1,new r["default"]({router:me,store:D,render:function(e){return e(s)}}).$mount("#app")},1863:function(e,t,n){var r=n(6133),o=n(2751),i=n(1399),u=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,[{key:"setAccessToken",value:function(e){localStorage.setItem("accessToken",e),i.b.defaults.headers.common.Authorization="Bearer ".concat(e)}},{key:"getAccessToken",value:function(){var e=localStorage.getItem("accessToken");return e}},{key:"reset",value:function(){localStorage.removeItem("accessToken")}}]),e}(),a=new u;t["Z"]=a},1399:function(e,t,n){n.d(t,{b:function(){return s},O:function(){return l}});var r=n(6166),o=n.n(r),i=(n(1539),n(9720),n(9600),n(4549));function u(e){function t(e){var t,n,r,o,i;if(!e.config.hideNotification){var u,c=null!==(t=null===(n=Object.entries(null!==(o=null===(i=e.data)||void 0===i?void 0:i.errors)&&void 0!==o?o:{}))||void 0===n||null===(r=n[0])||void 0===r?void 0:r.join(" "))&&void 0!==t?t:"";""===c||e.status<200||e.status>=300&&e.status<400||(e.status>=200&&e.status<300?u="success":e.status>=400&&(u="error"),a(c,u))}}e.interceptors.response.use((function(e){return t(e),Promise.resolve(e)}),(function(e){return e.response&&t(e.response),Promise.reject(e)}))}function a(e,t){(0,i.Notification)({message:"".concat(e),type:t,duration:5e3})}var c=n(1863),s=o().create({baseURL:{NODE_ENV:"production",BASE_URL:"/bloggy/"}.VUE_APP_BASE_URL+"api/",headers:{Authorization:"Bearer ".concat(c.Z.getAccessToken())}}),l=o().create({baseURL:{NODE_ENV:"production",BASE_URL:"/bloggy/"}.VUE_APP_BASE_URL+"api/"});u(s),u(l)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,i){if(!r){var u=1/0;for(l=0;l<e.length;l++){r=e[l][0],o=e[l][1],i=e[l][2];for(var a=!0,c=0;c<r.length;c++)(!1&i||u>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[c])}))?r.splice(c--,1):(a=!1,i<u&&(u=i));if(a){e.splice(l--,1);var s=o();void 0!==s&&(t=s)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[r,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+({585:"MainLayout",756:"AuthLayout"}[e]||e)+"-legacy."+{33:"2b1956fe",100:"77a9c8eb",156:"e95e7149",349:"248bb93f",456:"c30d9a52",490:"5b1898b9",565:"eca56fea",585:"f1f07a2f",745:"6f0d3967",756:"31a1d8f0"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+({585:"MainLayout",756:"AuthLayout"}[e]||e)+"."+{33:"9c99b8b1",156:"65f0830e",349:"3ceac000",585:"1f04ec2f",756:"1cc9ec86"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="bloggy:";n.l=function(r,o,i,u){if(e[r])e[r].push(o);else{var a,c;if(void 0!==i)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var f=s[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+i){a=f;break}}a||(c=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[o];var d=function(t,n){a.onerror=a.onload=null,clearTimeout(g);var o=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(n)})),t)return t(n)},g=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/bloggy/"}(),function(){var e=function(e,t,n,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var i=function(i){if(o.onerror=o.onload=null,"load"===i.type)n();else{var u=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=u,c.request=a,o.parentNode.removeChild(o),r(c)}};return o.onerror=o.onload=i,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=n[r],i=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var u=document.getElementsByTagName("style");for(r=0;r<u.length;r++){o=u[r],i=o.getAttribute("data-href");if(i===e||i===t)return o}},r=function(r){return new Promise((function(o,i){var u=n.miniCssF(r),a=n.p+u;if(t(u,a))return o();e(r,a,o,i)}))},o={143:0};n.f.miniCss=function(e,t){var n={33:1,156:1,349:1,585:1,756:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=i);var u=n.p+n.u(t),a=new Error,c=function(r){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),u=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+u+")",a.name="ChunkLoadError",a.type=i,a.request=u,o[1](a)}};n.l(u,c,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,u=r[0],a=r[1],c=r[2],s=0;if(u.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(c)var l=c(n)}for(t&&t(r);s<u.length;s++)i=u[s],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},r=self["webpackChunkbloggy"]=self["webpackChunkbloggy"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(309)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.c017a490.js.map